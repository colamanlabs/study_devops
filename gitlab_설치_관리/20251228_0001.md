
# gitlab 연동 구성 테스트 
```
2025.12.28 14:00
```


## 1️⃣ 로컬에서 프로젝트 먼저 생성

### 1. 📌 디렉터리 생성
```
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB>mkdir my-app

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB>cd my-app
```

### 2. 📌 Git 저장소 초기화

```
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git init
Initialized empty Git repository in C:/WORKS/WORKS_INTELLIJ_IDEA/WORKSPACE_INTELLIJ_IDEA_GITLAB/my-app/.git/
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git branch -M main
```

```
기본 브랜치 이름은 요즘 main 권장
(구버전 Git은 master일 수 있음)
```


### 3. 📌 초기 파일 생성
```
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>echo "# my-app" > README.md
```

### 4. 📌 첫 커밋
```
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git add .

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git commit -m "Initial commit"
[main (root-commit) 258e2b2] Initial commit
1 file changed, 1 insertion(+)
create mode 100644 README.md
```

## 2️⃣ GitLab에서 빈 Project 생성

```aiignore
📌 메뉴 경로
GitLab → Create a project → Blank project

📌 설정 포인트 (중요)

❌ Initialize repository with README → 체크 해제

Project name: my-app

Visibility: Private (권장)

📌 이유:

로컬에서 이미 커밋이 있으므로 GitLab은 반드시 빈 저장소여야 합니다.
```

## 3️⃣ 로컬 저장소와 GitLab 연결

### 1. 📌 GitLab 프로젝트 URL 확인

```aiignore
http://***.***.***.***/colaman/my-app.git
```


### 2. 📌 remote 추가
```
실행중 주소를 예제 주소로 입력해서, origin 을 재정의 함

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git remote add origin https://gitlab.example.com/group/my-app.git

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git remote -v
origin  https://gitlab.example.com/group/my-app.git (fetch)
origin  https://gitlab.example.com/group/my-app.git (push)

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git push -u origin main
fatal: unable to access 'https://gitlab.example.com/group/my-app.git/': Could not resolve host: gitlab.example.com

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git remote add origin http://***.***.***.***/colaman/my-app.git
error: remote origin already exists.

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git remote remove origin
```

```
다시 진행
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git remote add origin http://***.***.***.***/colaman/my-app.git
```

#### remote 설정 확인하기
```
확인하기
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git remote -v
origin  http://***.***.***.***/colaman/my-app.git (fetch)
origin  http://***.***.***.***/colaman/my-app.git (push)
```


### 4️⃣ GitLab으로 최초 Push
```
git push -u origin main

✔ -u : 이후부터 git push 만 해도 자동으로 origin/main 사용
```
```
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git push -u origin main
fatal: Unencrypted HTTP is not recommended for GitLab. Ensure the repository remote URL is using HTTPS or see https://aka.ms/gcm/unsaferemotes about how to allow unsafe remotes.
Username for 'http://***.***.***.***': colaman
Password for 'http://colaman@***.***.***.***':
Enumerating objects: 3, done.
Counting objects: 100% (3/3), done.
Writing objects: 100% (3/3), 221 bytes | 110.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
To http://***.***.***.***/colaman/my-app.git
* [new branch]      main -> main
  branch 'main' set up to track 'origin/main'.

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
```


### 5️⃣ GitLab에서 확인
```
Project → Repository → Files

README.md, 소스 코드 확인

main 브랜치 생성됨

🎉 연동 완료
```

### 6️⃣ 이후 일반적인 개발 흐름
```
로컬 작업
↓
git add
git commit
↓
git push
↓
GitLab
├─ MR 생성
├─ CI/CD 실행
└─ 코드 리뷰
```


### 7️⃣ 실무에서 많이 쓰는 추가 설정 (권장)
#### ✅ .gitignore 먼저 추가
```
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>curl -o .gitignore https://www.toptal.com/developers/gitignore/api/java,spring,intellij
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
Dload  Upload   Total   Spent    Left  Speed
100  3148  100  3148    0     0   4155      0 --:--:-- --:--:-- --:--:--  4164

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
```
#### ✅ 기본 브랜치 보호

```aiignore
기본 브랜치 보호
Project → Settings → Repository → Protected branches

main: push 금지

MR 통해서만 병합

```

```aiignore
### main 브랜치 변경 
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git checkout main
Already on 'main'
Your branch is up to date with 'origin/main'.

### 로컬에 파일 추가
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git add .
warning: in the working copy of '.gitignore', LF will be replaced by CRLF the next time Git touches it

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git push origin main
Everything up-to-date


### 로컬 추가 파일 commit
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git commit -m "sample.txt add"
[main c8f3266] sample.txt add
 2 files changed, 146 insertions(+)
 create mode 100644 .gitignore
 create mode 100644 sample.txt


### remote 에 push (main 브랜치 보호설정으로 거절)


C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>git push origin main
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 24 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 1.63 KiB | 836.00 KiB/s, done.
Total 4 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
remote: GitLab: You are not allowed to push code to protected branches on this project.
To http://***.***.***.***/colaman/my-app.git
 ! [remote rejected] main -> main (pre-receive hook declined)
error: failed to push some refs to 'http://***.***.***.***/colaman/my-app.git'

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>


...
remote: GitLab: You are not allowed to push code to protected branches on this project.
To http://***.***.***.***/colaman/my-app.git
 ! [remote rejected] main -> main (pre-receive hook declined)
error: failed to push some refs to 'http://***.***.***.***/colaman/my-app.git'
...

```

#### ✅ SSH 방식 권장 (비밀번호 문제 방지)
```
ssh-keygen -t ed25519
cat ~/.ssh/id_ed25519.pub

GitLab → User Settings → SSH Keys 등록

git remote set-url origin git@gitlab.example.com:group/my-app.git
```


## ✅ Windows SSH 설정

### 1️⃣ Windows에 OpenSSH 있는지 확인 (대부분 이미 있음)
```
CMD 또는 PowerShell에서 확인

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>ssh -V
OpenSSH_for_Windows_9.5p2, LibreSSL 3.8.2

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
```


### 2️⃣ SSH 키 생성 (Windows CMD / PowerShell)
📌 CMD 또는 PowerShell
```
ssh-keygen -t ed25519

중간 질문들 (권장 답변)
👉 그냥 Enter
👉 운영서버 아니면 Enter (비워둠)

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>ssh-keygen -t ed25519
Generating public/private ed25519 key pair.
Enter file in which to save the key (C:\Users\colaman/.ssh/id_ed25519):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in C:\Users\colaman/.ssh/id_ed25519
Your public key has been saved in C:\Users\colaman/.ssh/id_ed25519.pub
The key fingerprint is:
SHA256:******************************************* ****************
The key's randomart image is:
......
......
......
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>


생성 결과
C:\Users\colaman\.ssh>dir id_ed*
......

 C:\Users\colaman\.ssh 디렉터리

2025-12-28(일)  14:19               411 id_ed25519
2025-12-28(일)  14:19                99 id_ed25519.pub
               2개 파일                 510 바이트
               0개 디렉터리  1,440,580,075,520 바이트 남음
```

### 3️⃣ 공개키 내용 확인 (Linux의 cat 대응)
```
type %USERPROFILE%\.ssh\id_ed25519.pub

출력 예:
ssh-ed25519 AAAAAAAAAAAAAAAAAAAAAAAAA... colaman@PC-NAME
👉 이 전체 한 줄를 복사

```

### 4️⃣ GitLab에 SSH Key 등록
```
GitLab UI
우측 상단 프로필
→ Edit profile
→ SSH Keys


Key: 방금 복사한 공개키 붙여넣기

Title: my-pc 또는 intel-dev

Expires at: 비워두거나 필요시 설정

Add key
```
### 5️⃣ Git remote URL SSH로 변경
```
기존 origin 변경 (추천)
git remote set-url origin git@***.***.***.***:colaman/my-app.git

확인
git remote -v
```


### 6️⃣ SSH 연결 테스트 (매우 중요)

```
ssh -p ***** -T git@***.***.***.***

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>ssh -p ***** -T git@***.***.***.***
Welcome to GitLab, @colaman!

C:\WORKS\WORKS_INTELLIJ_IDEA\WORKSPACE_INTELLIJ_IDEA_GITLAB\my-app>
```


7️⃣ 이후부터는 비밀번호 없이 사용 🎉
```
git push
git pull
```



-- 끝 --
